<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🚀 Spinning Cube from Notepad</title>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; background: #000; }
    canvas { display: block; }
    #overlay {
      position: absolute;
      top: 1rem;
      left: 1rem;
      color: white;
      font-family: monospace;
      background: rgba(0,0,0,0.5);
      padding: 0.5rem 1rem;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div id="overlay">🛠️ BUILDING...</div>

  <div id="commits" style="
    position: absolute;
    bottom: 1rem;
    left: 1rem;
    font-family: monospace;
    font-size: 0.8rem;
    color: #ccc;
    background: rgba(0,0,0,0.5);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    max-width: 300px;
    line-height: 1.4;
    display: none;
  ">
    🔄 Loading commit history...
  </div>



  <!-- Three.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

  <script>

    setTimeout(() => location.reload(), 10000); // 5000ms is 5 seconds

    // Setup
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x111111);

    const camera = new THREE.PerspectiveCamera(
      75, window.innerWidth / window.innerHeight, 0.1, 1000
    );
    camera.position.z = 5;

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Lighting
    const ambient = new THREE.AmbientLight(0x404040);
    scene.add(ambient);

    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(3, 2, 1);
    scene.add(light);

    // Cube
    const geometry = new THREE.BoxGeometry(1, 1, 1);
    const material = new THREE.MeshStandardMaterial({ color: 0x00ffcc });
    const cube = new THREE.Mesh(geometry, material);
    scene.add(cube);

    // Build flag
    let loading = true;
    let t = 0;

    // Animate
    function animate() {
      requestAnimationFrame(animate);

      if (loading) {
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        t += 0.01;
        camera.position.x = Math.sin(t) * 5;
        camera.position.z = Math.cos(t) * 5;
        camera.lookAt(cube.position);
        renderer.render(scene, camera);
        return;
      }

      // After loading: scene has changed
      renderer.render(scene, camera);
    }

    animate();

    // Resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // Simulate build process
    setTimeout(() => {
      loading = false;

      // Update overlay
      const overlay = document.getElementById("overlay");
      overlay.innerText = "✔️ Deployed from Notepad";

      // Show commits panel
      document.getElementById("commits").style.display = "block";

      // Remove cube from scene
      scene.remove(cube);

      // (Optional: update background or add new scene here)
    }, 2000); // 1000ms is 1 second

    // GitHub Commits API
    fetch('https://api.github.com/repos/vercel/next.js/commits')
      .then(res => res.json())
      .then(commits => {
        const commitList = commits.slice(0, 5).map(commit => {
          const sha = commit.sha.substring(0, 7);
          const msg = commit.commit.message.split('\n')[0];
          const author = commit.commit.author.name;
          return `✔ ${sha} - ${msg} (${author})`;
        }).join('<br>');
        document.getElementById("commits").innerHTML = `
          📦 Latest Deploys:<br>${commitList}
        `;
      })
      .catch(err => {
        document.getElementById("commits").innerText = "⚠️ Could not load commits.";
        console.error("GitHub API error:", err);
      });
  </script>
</body>
</html>
